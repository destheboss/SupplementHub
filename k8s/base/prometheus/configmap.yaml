apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-config
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s

    scrape_configs:
      - job_name: prometheus
        metrics_path: /prometheus/metrics
        static_configs:
          - targets: ['prometheus:9090']

      - job_name: api-gateway
        metrics_path: /actuator/prometheus
        static_configs:
          - targets: ['api-gateway:9000']

      - job_name: product-service
        metrics_path: /actuator/prometheus
        static_configs:
          - targets: ['product-service:8080']

      - job_name: order-service
        metrics_path: /actuator/prometheus
        static_configs:
          - targets: ['order-service:8080']

      - job_name: inventory-service
        metrics_path: /actuator/prometheus
        static_configs:
          - targets: ['inventory-service:8080']
